/*
    Events Calendar - v0.1.0 - [last build on 2014-04-09]
    https://github.com/pcaldredbann/EventsCalendar
    Copyright (c) 2014 Paul Aldred-Bann
    Licensed MIT
*/
!function(a){"use strict";ko.commitObservable=function(a){var b=a,c=ko.observable(a),d=ko.computed({read:function(){return c()},write:function(a){b=a},owner:this});return d.commit=function(){c(b)},d.rollback=function(){b=c()},d};var b=function(a){this.header=ko.observable(a.period),this.weeks=ko.observableArray(ko.utils.arrayMap(function(){for(var b=a.period.split(" "),c=new Date(b[1],a.months.indexOf(b[0]),1),d=null,e=[],f=[];1!==c.getDay();)c.setDate(c.getDate()-1);for(d=new Date(c),d.setDate(d.getDate()+42);c.getTime()<d.getTime();)e.push({date:new Date(c),scheduledEvent:void 0,onScheduledEventChange:a.onScheduledEventChange}),c.setDate(c.getDate()+1);for(var g=0;g<e.length;g+=7)f.push({days:e.slice(g,g+7)});return f}(),function(a){return new c(a)})),this.days=ko.computed(function(){if(this.weeks()){for(var a=[],b=0;b<this.weeks().length;b++)a.push(this.weeks()[b].days());return[].concat.apply([],a)}},this),this.selectedDay=ko.observable(void 0)},c=function(a){this.days=ko.observableArray(ko.utils.arrayMap(a.days,function(a){return new d(a)}))},d=function(a){var b=this;this.date=ko.observable(a.date),this.scheduledEvent=ko.commitObservable(a.scheduledEvent),this.scheduledEvent.subscribe(function(c){c&&a.onScheduledEventChange&&"function"==typeof a.onScheduledEventChange&&a.onScheduledEventChange.call(b,c)})};a.fn.EventsCalendar=function(c){return c=a.extend({period:"April 2014",months:["January","February","March","April","May","June","July","August","September","October","November","December"],onScheduledEventChange:function(){}},c),this.each(function(){ko.applyBindings(new b(c),this)})}}(jQuery);